# Този екшън се използва за изграждане и тестване на проекта.
name: Build and Test

# Този екшън трябва да се стартира при push и pull request събития в main ветката.
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:  

jobs:
  build-test:
    runs-on: ubuntu-latest
    steps:
      # Стъпка за извличане на репозиторито.
      - name: Checkout the repository
        uses: actions/checkout@v2

      # Стъпка за настройка на Node.js 18.
      - name: Use Node.js 20
        uses: actions/setup-node@v3
        with:
          node-version: 20.x
          cache: 'npm'

      # Стъпка за инсталиране на зависимостите.
      - name: Install dependencies
        run: npm install

      # Стъпка за изпълнение на интеграционни тестове.
      - name: Run integration tests
        run: npm test
